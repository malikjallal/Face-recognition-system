# ๐ FaceGate + Agent (Flask + ONNX/PyTorch)

ูุดุฑูุน **FaceGate** ูู ูุธุงู ุชุญูู ุจุงููุฌูู (Face Verification) ูุฏูุฌ ูุน **Agent Tools**.  
ุงููุธุงู ูุนุชูุฏ ุนูู **EfficientNet-B0** ูุฏุฑูุจ ูุณุจููุง (ONNX/PyTorch)ุ ููุดุชุบู ุนุจุฑ **Flask API** ูุน ูุงุฌูุฉ ููุจ ุชูุงุนููุฉ.

---

## ๐ ูููู ุงููุดุฑูุน
```
project-root/
โ
โโโ app_flask.py              # ุงูููุฏ ุงูุฑุฆูุณู (Flask app + Agent tools)
โโโ requirements.txt           # ุงูููุชุจุงุช ุงููุทููุจุฉ
โโโ README.md                  # ูุฐุง ุงูููู
โ
โโโ assets/                    # ูููุงุช ุงููุธุงู
โ   โโโ class_names.json       # ุฃุณูุงุก ุงูููุงุณุงุช (ุจุงูุชุฑุชูุจ ุงูุตุญูุญ ูู ุงูุชุฏุฑูุจ)
โ   โโโ threshold.json         # ูููุฉ ุงูุนุชุจุฉ ุงูุงูุชุฑุงุถูุฉ (ูุซุงู: 0.55)
โ
โโโ models/                    # ุงูููุงุฐุฌ
โ   โโโ best_efficientnet_b0.onnx   # ุงูููุฏูู ONNX
โ   โโโ best_efficientnet_b0.pth    # ูุณุฎุฉ Torch (ุงุฎุชูุงุฑู)
โ
โโโ logs/                      # ูููุงุช ุงูุชุฏููู (Audit Logs)
โ   โโโ audit_log.csv          # ูุชูููุฏ ุฃูุชููุงุชูููุงู
โ
โโโ venv/                      # ุจูุฆุฉ ุจุงูุซูู ุงูุงูุชุฑุงุถูุฉ (ุงุฎุชูุงุฑู)
```

---

## โ๏ธ ุงููุชุทูุจุงุช
- Python 3.9 โ 3.11 (ููุฌุฑูุจ ุนูู 3.11.9)
- ููุชุจุงุช Python (ูุฐููุฑุฉ ูู `requirements.txt`):
  - Flask
  - onnxruntime
  - torch (ุงุฎุชูุงุฑู ูู ุงุณุชุนููุช `.pth`)
  - numpy
  - pandas
  - pillow
  - httpx

---

## ๐ ุฎุทูุงุช ุงูุชุดุบูู

### 1) ุชูุนูู ุงูุจูุฆุฉ ุงูุงูุชุฑุงุถูุฉ (venv)
ุนูู Windows:
```bash
python -m venv .venv
.venv\Scripts\activate
```

ุนูู Linux / macOS:
```bash
python3 -m venv .venv
source .venv/bin/activate
```

---

### 2) ุชุซุจูุช ุงูููุชุจุงุช
```bash
pip install -r requirements.txt
```

---

### 3) ุชุดุบูู ุงูุณูุฑูุฑ
```bash
python app_flask.py
```

ุฑุญ ูุทูุนูู ุณุทุฑ ุฒู:
```
Running on http://127.0.0.1:5000/
```

ุงูุชุญ ุงููุชุตูุญ ูุฑูุญ ุนูู ุงูุฑุงุจุท:
๐ [http://127.0.0.1:5000/](http://127.0.0.1:5000/)

---

## ๐ผ๏ธ ุงุณุชุฎุฏุงู ุงููุงุฌูุฉ (UI)

1. ุงูุชุจ **Username** (ูุงุฒู ูุทุงุจู ุงุณู ุงูููุงุณ ูู `class_names.json`).  
   โ๏ธ ุชู ุชุนุฏูู ุงูููุฏ ุจุญูุซ ูุงุฒู ุงูุงุณู ูุงูุตูุฑุฉ ูุชุทุงุจููุง 100% ุนุดุงู ูุณูุญ ุจุงูุฏุฎูู.  
2. ุญููู ุตูุฑุฉ ุงููุฌู ุฃู ุงุณุชุนูู ุงููุงููุฑุง.  
3. ุญุฏูุฏ ูููุฉ **Decision Threshold** (ุงูุชุฑุงุถู 0.55).  
4. ุงุถุบุท **Verify**.  
5. ุฅุฐุง ุงูุงุณู ูุงูุตูุฑุฉ ูุชุทุงุจููู โ ุงููุธุงู ูุนุทูู **GRANTED โ**  
   ุบูุฑ ููู โ **DENIED โ**.

---

## ๐ APIs ุงููุชููุฑุฉ

- **`GET /health`** โ ูุนูููุงุช ุนู ุงูููุฏูู ูุงูุนุชุจุฉ.
- **`POST /verify`** โ ุงูุชุญูู ุจุงููุฌู + ุงูุงุณู.
- **`GET /audit`** โ ุขุฎุฑ ุนูููุงุช ุงูุชุญูู (JSON).
- **`GET /audit.csv`** โ ุชุญููู ููู ุงูู Audit ุจุตูุบุฉ CSV.
- **`POST /agent/chat`** โ ุชูุงุนู ูุน ุงูู Agent (ูุณููุญ ููุท ุจุนุฏ ุชุทุงุจู ุงููุฌู ูุงูุงุณู).
- **`GET /tasks.json`** โ ุงุณุชุฑุฌุงุน ุงูููุงู ุงููุญููุธุฉ.

---

## ๐ง ููุงุญุธุงุช ูููุฉ
- ุงููุธุงู ูุดุบูู ุจู **ONNX Runtime** (ููุถูู ุงุณุชุฎุฏุงู CUDA ูู ููู GPU).  
- ูุงุฒู ููู `class_names.json` ูููู ุจููุณ ุงูุชุฑุชูุจ ุงููู ุงุชุฏุฑูุจ ููู ุงูููุฏูู.  
- ุชูุฏุฑ ุชุบููุฑ **Threshold** ุงูุงูุชุฑุงุถูุฉ ูู `assets/threshold.json`.  
- ุงูู Agent ูุง ุฑุญ ูุดุชุบู ุฅูุง ุฅุฐุง ุชู ุงูุชุญูู ุจุงููุฌู ูุงูุงุณู ุจุดูู ุตุญูุญ.  

---

## ๐จโ๐ป ุฎุทูุงุช ุฅุถุงููุฉ
- ูู ุนูููุงุช ุงูุฏุฎูู ูุงููุดู ุจุชุชุณุฌู ูู ููู: `logs/audit_log.csv`.  
- ูู ุญุงู ูุดู ุงููุณุชุฎุฏู ุฃูุซุฑ ูู 3 ูุฑุงุช โ ูุชู **Lockout** ููุฏุฉ 60 ุซุงููุฉ.  
- ุงููุธุงู ูุฏุนู **Webcam Capture** ูุจุงุดุฑุฉ ูู ุงููุชุตูุญ.  

---

## ๐จโ๐ฌ ุงููุทูุฑ
- ูุดุฑูุน FaceGate ูุจูู ุฎุตูุตูุง ููุงุณุชุฎุฏุงู ุงูุฃูุงุฏููู ูุงูุชุฌุฑูุจู.  
- ุบูุฑ ูุฎุตุต ููุงุณุชุฎุฏุงู ุงูุฅูุชุงุฌู (Production) ุฅูุง ุจุนุฏ ุชูููุฉ ุงูุญูุงูุฉ ูุฅุถุงูุฉ HTTPS.  

---
